{"id":"sitposting.html","dependencies":[{"name":"./localforage.js","dynamic":true,"resolved":"C:\\Users\\AnD\\WebstormProjects\\sit\\localforage.js","parent":"C:\\Users\\AnD\\WebstormProjects\\sit\\sitposting.html"},{"name":"_css_loader","parent":"C:\\Users\\AnD\\WebstormProjects\\sit\\sitposting.html","resolved":"C:\\Users\\AnD\\AppData\\Roaming\\npm\\node_modules\\parcel-bundler\\src\\builtins\\css-loader.js"},{"name":"C:\\Users\\AnD\\WebstormProjects\\sit\\package.json","includedInParent":true,"mtime":1614240222749}],"generated":{"html":"<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>Title</title>\r\n    <style>.active {\r\n            background-color: white;\r\n        }\r\n\r\n        .tab-container>div {\r\n            display: none;\r\n        }\r\n\r\n        .tab-container .show {\r\n            display: block;\r\n        }</style>\r\n</head>\r\n\r\n<body>\r\n    <div class=\"buttons\">\r\n        <button class=\"plural-button active\" data-tab=\"plural-tab\">Несколько</button>\r\n        <button class=\"singular-button\" data-tab=\"singular-tab\">Одно</button>\r\n    </div>\r\n    <div class=\"tab-container\">\r\n        <div class=\"tab-one singular-tab\">\r\n            <input type=\"date\" placeholder=\"date\" id=\"date\">\r\n            <input type=\"text\" placeholder=\"event\" id=\"event\">\r\n            <div class=\"status-list\"></div>\r\n            <button class=\"add-item\" disabled=\"true\">OK</button>\r\n        </div>\r\n        <div class=\"tab-two plural-tab show\">\r\n            <textarea rows=\"10\" cols=\"45\" name=\"text\"></textarea>\r\n            <div class=\"status-buttons-container\">\r\n                <p><input type=\"radio\" data-status=\"music\"> Музыка</p>\r\n                <p><input type=\"radio\" data-status=\"nomusic\" checked=\"\"> Не музыка</p>\r\n            </div>\r\n            <button class=\"add-list\">OK2</button>\r\n        </div>\r\n    </div>\r\n    <div class=\"container event-list\">\r\n\r\n    </div>\r\n    <button class=\"forage-clear\">Forage clear</button>\r\n\r\n</body>\r\n<script src=\"/d4dfa0218f263188e87cf3a5b346141c.js\">\r\n</script>\r\n<script type=\"module\">\r\n    import getText from \"./gettext.js\"\r\n    import Render from \"./render.js\";\r\n    import makeBtnActive from \"./makeBtnActive.js\";\r\n    import ValidationForm from \"./validationForm.js\";\r\n    import StatusBtn from \"./statusBtns.js\";\r\n\r\n    localforage.config({\r\n        driver: localforage.IndexedDB,\r\n        name: 'myApp'\r\n    });\r\n\r\n    /* divs */\r\n    const tabContainer = document.querySelector(\".tab-container\");\r\n\r\n    /* buttons */\r\n    const buttonsContainer = document.querySelector(\".buttons\");\r\n    const statusBtnContainer = document.querySelector(\".status-buttons-container\");\r\n    const forageClearBtn = document.querySelector(\".forage-clear\");\r\n\r\n    //textarea\r\n    let eventList = [];\r\n    console.log(eventList);\r\n\r\n\r\n    //по одному\r\n    const gotDate = document.querySelector(\"#date\");\r\n    const gotEvent = document.querySelector(\"#event\");\r\n    const statusListContainer = document.querySelector(\".status-list\");\r\n\r\n\r\n\r\n    const addItemBtn = document.querySelector(\".add-item\"); // OK button\r\n    const validationFormSing = new ValidationForm(addItemBtn, { date: false, event: false, status: false });\r\n\r\n    const addListBtn = document.querySelector(\".add-list\"); // Ok2\r\n\r\n    const eventListContainer = document.querySelector(\".event-list\"); // div для результатов\r\n\r\n    let gotObj = {\r\n        date: \"\",\r\n        event: \"\",\r\n        status: \"\" // class_style\r\n    };\r\n\r\n    //обработка клика по статусу на вкладке Одно\r\n    const singleStatusHandler = (ev) => {\r\n        validationFormSing.checkListFieldOn(\"status\");\r\n        gotObj.status = ev.target.dataset.style;\r\n    };\r\n\r\n    const singleStatus = new StatusBtn(statusListContainer, singleStatusHandler);\r\n    singleStatus.render();\r\n    //pluralstatus< plStatusHandler\r\n\r\n\r\n    /* Получение данных с полей */\r\n\r\n    //обработка верхних кнопок\r\n    buttonsContainer.onclick = (ev) => {\r\n        const tab = ev.target.dataset.tab;\r\n        const tabActiveDiv = tabContainer.querySelector(\".show\");\r\n        tabActiveDiv.classList.remove(\"show\");\r\n        const tabDiv = tabContainer.querySelector(`.${tab}`);\r\n        tabDiv.classList.add(\"show\");\r\n        makeBtnActive(buttonsContainer, ev);\r\n    };\r\n\r\n\r\n    // обработка Date\r\n    gotDate.onchange = (ev) => {\r\n        const value = ev.target.value;\r\n        if (value) {\r\n            validationFormSing.checkListFieldOn(\"date\");\r\n            gotObj.date = value;\r\n        } else {\r\n            validationFormSing.checkListFieldOff(\"date\");\r\n        }\r\n    };\r\n\r\n    // обработка event\r\n    gotEvent.onkeyup = (ev) => {\r\n        const value = ev.target.value;\r\n        if (value) {\r\n            validationFormSing.checkListFieldOn(\"event\");\r\n            gotObj.event = value;\r\n        } else {\r\n            validationFormSing.checkListFieldOff(\"event\");\r\n        }\r\n    };\r\n\r\n\r\n    // обработка клика OK, объект gotObj → в массив, event → в div\r\n    addItemBtn.onclick = () => {\r\n        gotDate.value = \"\";\r\n        gotEvent.value = \"\";\r\n        eventList.push(gotObj);\r\n        console.log(eventList);\r\n        localforage.setItem('eventlist', eventList);\r\n        render.renderItem(gotObj);\r\n    };\r\n\r\n    //получение статусов\r\n    let selectedStatus = \"nomusic\";\r\n\r\n    statusBtnContainer.onclick = (ev) => {\r\n        selectedStatus = ev.target.dataset.status;\r\n    };\r\n\r\n    //OK2\r\n    addListBtn.onclick = () => {\r\n        const data = document.querySelector(\"textarea\").value;\r\n        let addedEventList = getText(data, selectedStatus);\r\n        eventList.push(...addedEventList);\r\n        localforage.setItem('eventlist', eventList);\r\n        render.renderEventList(addedEventList);\r\n    };\r\n\r\n    let render = new Render(eventListContainer);\r\n            localforage.getItem('eventlist').then(function (value) {\r\n            // This code runs once the value has been loaded\r\n            // from the offline store.\r\n            console.log(value);\r\n            if (value!==null) {\r\n                eventList = value;\r\n                render.renderEventList(eventList);\r\n            }\r\n        }).catch(function (err) {\r\n            // This code runs if there were any errors\r\n            console.log(eventList);\r\n        });\r\n\r\n\r\n    //Forage Clear\r\n    forageClearBtn.onclick = () => {\r\n        localforage.clear().then(function () {\r\n            // Run this code once the database has been entirely deleted.\r\n            console.log('Database is now empty.');\r\n        }).catch(function (err) {\r\n            // This code runs if there were any errors\r\n            console.log(err);\r\n        });\r\n        //clean render container innerhtml\r\n    }\r\n</script>\r\n\r\n</html>"},"sourceMaps":null,"error":null,"hash":"98a57257d3e68478252939cd801378c1","cacheData":{"env":{}}}